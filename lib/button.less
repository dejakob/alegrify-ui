@alegrify-button__height--regular: 48px;

.alegrify-button {
    // Reset default browser behavior
    display: inline-block;
    cursor: pointer;
    border: none;
    appearance: none;

    height: @alegrify-button__height--regular;
    
    // Border radius
    border-radius: @alegrify-button__height--regular * 0.5;

    // Margin / padding
    padding: 0 16px;

    // Typography
    font-size: 14px;
    line-height: @alegrify-button__height--regular * 0.5;
    font-weight: 400;
    font-style: normal;

    // Borders
    border-width: 2px;
    border-style: solid;

    // Colors
    color: @primary-color;
    border-color: @primary-color;
    background-color: @action-color;
    transition: background-color 0.2s;

    &__content {
        display: block;
        transform: translate(0, 0);
        transition: transform 0.4s;
    }

    // States
    &:focus {
        outline-color: @primary-color--outline;
        outline-style: dashed;
        outline-width: 1px;
        outline-offset: 2px;
    }
    &:hover {
        background-color: lighten(@primary-color, 45%);
    }
    &:active {
        background-color: lighten(@primary-color, 40%);
    }

    &[disabled],
    &--disabled {
        opacity: 0.3;
        cursor: not-allowed;
    }


    // Variants
    &--full {
        width: 100%;
    }

    &--primary {
        border: none;
        padding: 0 20px;
        background-color: @primary-color;
        color: @action-color;

        &:focus {
            outline-color: @primary-color--outline;
        }
        &:hover {
            background-color: darken(@primary-color, 10%);
        }
        &:active {
            background-color: darken(@primary-color, 20%);
        }

        &[disabled],
        &.alegrify-button--disabled,
        &.alegrify-button--loading {
            background-color: @primary-color;
        }
    }

    &--destructive {
        border: none;
        padding: 0 20px;
        background-color: @error-color;
        color: @action-color;

        &:focus {
            outline-color: @error-color--outline;
        }
        &:hover {
            background-color: darken(@error-color, 10%);
            border-color: darken(@error-color, 10%);
        }
        &:active {
            background-color: darken(@error-color, 20%);
            border-color: darken(@error-color, 20%);
        }

        &[disabled],
        &.alegrify-button--disabled,
        &.alegrify-button--loading {
            background-color: @error-color;
        }
    }

    &--link {
        border: none;
    }

    &--loading {
        animation: alegrify-button__loading-slide 1s;
        transition: padding 0.4s;
        padding-right: @alegrify-button__height--regular * .5 + 16px + 16px;
        cursor: progress;

        &:before {
            @alegrify-button__loader-size: @alegrify-button__height--regular * .5;

            content: '';
            display: block;
            height: @alegrify-button__loader-size;
            width: @alegrify-button__loader-size;

            float: left;
            margin-right: 16px;

            position: absolute;

            border-radius: @alegrify-button__loader-size * .5;
            border-width: 2px;
            border-style: solid;
            border-color: @primary-color;

            /* @TODO: clip-path is only supported from IE10 */
            clip-path: circle(12px at 0 0);
            animation: alegrify-appear 2s, alegrify-rotate 1s infinite linear;
        }

        &:hover,
        &:active {
            background-color: @action-color;
        }
        &.alegrify-button--primary:hover,
        &.alegrify-button--primary:active {
            background-color: @primary-color;
        }
        &.alegrify-button--error:hover,
        &.alegrify-button--error:active {
            background-color: @error-color;
        }

        .alegrify-button__content {
            transform: translate(40px, 0);
        }

        &.alegrify-button--primary {
            &:before {
                border-color: @action-color;
            }
        }
    }
}
